{% extends "_page.html" %}

{% set _page = {
     "title": ('"' ~ search_text ~ '"')
   }
%}

{% set _navbar = {
     "search": true,
     "search_text": search_text
   }
%}

{% set _title = {} %}

{% if results is defined %}
  {% set _title = _title|merge({ "results": results_count }) %}
{% endif %}

{% if download is defined %}
  {% set _title = _title|merge({ "download": download }) %}
{% endif %}

{% block content %}

<div class="sresults">

  {% if results is defined %}
  <table class="table table-striped table-hover table-bordered">

    <!-- Table header -->
    <thead>
      <tr>
        <td>Protein</td>
        <td>Source</td>
        <td>Location</td>
        <td>pI</td>
      </tr>
    </thead>

    <!-- Table body -->
    <tbody>

      {% for result in results %}
      <!-- Search result-->
      <tr url="{{ result[0] }}">
	{% for value in result|slice(1) %}
	<td>{{ value }}</td>
	{% endfor %}
      </tr>
      {% endfor %}

    </tbody>
  </table>
  {% else %}
  <p class="lead">
    No results found.
  </p>
  {% endif %}

</div> <!-- /.sresults -->

{% endblock %}

{% block footer %}
<script>
  $(document).ready(function(){
    /*
     * Search results link to details page:
     */
    $('div.sresults table tbody tr').click(function(){
      window.location = $(this).attr('url');
    });
  });
</script>
{% endblock %}
