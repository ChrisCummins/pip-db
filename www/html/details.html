<!--
    THE DETAILS PAGE.

    Schema for content args:

    search_text => (optional) Search box text.

    download   => (optional) The href to download page.

    names      => An array of names, with the first element being the primary
                  name, and other elements after this being alternative names.

    properties => An associate array of property names and values to populate
                  the details table with.

    meta       => (optional) The record meta-data.

    links      => (optional) An associative array of external links in the form
                  <name, href> which is used to populate the external links
                  panel.
    ref        => (optional) An associative array for the "Reference this page"
                  section.
-->

{% extends "_page.html" %}

{% set _page = {
     "title": names[0]
   }
%}

{% set _navbar = {
     "search": true
   }
%}

{% set _title = {
     "heading": _page.title
   }
%}

<!-- Navbar search text -->
{% if search_text is defined %}
  {% set _navbar = _navbar|merge({ "search_text": search_text }) %}
{% endif %}

<!-- Title download link -->
{% if download is defined %}
  {% set _title = _title|merge({ "download": download }) %}
{% endif %}

{% block content %}

<div id="details">

  <div class="row">
    <div class="col-md-8">
      <table class="table table-striped table-bordered">

        <!-- Table body -->
        <tbody>

          {% for name in names %}
          <tr>
            {% if loop.first %}
            <td>Name:</td>
            {% else %}
            <td>Alternative name:</td>
            {% endif %}
            <td>{{ name }}</td>
          </tr>
          {% endfor %}

          {% for key, value in properties %}
          <tr>
            <td>{{ key }}</td>
            <td>{{ value }}</td>
          </tr>
          {% endfor %}

        </tbody>
      </table>

    </div> <!-- /.col-md-8 -->

    <div class="col-md-4">

      {% if links is defined%}
      <!-- External links section -->
      <div class="panel panel-primary panel-extern">
        <div class="panel-heading">
          <h3 class="panel-title">External Links</h3>
        </div>

        <div class="panel-body">
          <ul class="panel-link-list">

            {% for name, href in links %}
            <li>
              <a href="{{ href }}"
                 class="btn btn-success btn-block">
                {{ name }}
              </a>
            </li>
            {% endfor %}

          </ul>
        </div>
      </div> <!-- /.panel -->
      {% endif %}

      {% if ref is defined %}
      <!-- Reference text section -->
      <div class="panel panel-primary panel-reference">
        <div class="panel-heading">
          <h3 class="panel-title">Reference this page</h3>
        </div>

        <div class="panel-body">
          <blockquote>{{ ref.author }}.
            ({{ ref.year }})
            {{ ref.title }},
            <i>{{ ref.site }}</i>.
            Available from: &lt;{{ ref.href }}&gt;.
            [Cited 10 July 2013].
          </blockquote>
        </div>
      </div> <!-- /.panel -->
      {% endif %}

    </div> <!-- /.col-md-4 -->

  </div> <!-- /.row -->

  {% if meta is defined %}
  <div class="row">
    <div class="col-md-12">
      <!-- Record metadata -->
      <div class="meta-holder">
        <ul class="meta">
          <li>Added {{ meta.added }}.</li>
          <li>Last edited {{ meta.edited }}.</li>
        </ul>
      </div>
    </div> <!-- /.col-md-12 -->
  </div> <!-- /.row -->
  {% endif %}

</div> <!-- /#details -->

{% endblock %}
